<div class="min-h-screen flex items-center justify-center relative overflow-hidden p-4">
  <!-- Background gradient -->
  <div class="absolute inset-0 bg-gradient-to-br from-purple-600 to-purple-800">
    <div class="absolute inset-0 bg-[url('https://png.pngtree.com/thumb_back/fw800/background/20231219/pngtree-simple-geometric-fluid-purple-gradient-e-commerce-event-poster-background-image_15520153.png')] bg-cover bg-center bg-no-repeat opacity-70"></div>
  </div>
  
  <!-- Background overlay effects -->
  <div class="absolute inset-0 z-1">
    <div class="absolute inset-0 bg-gradient-radial from-white/10 to-transparent"></div>
  </div>

  <!-- Glass card container -->
  <div class="relative bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 p-4 w-full max-w-lg max-h-[95vh] shadow-2xl animate-slideUp">
    <!-- Register header -->
    <div class="text-center mb-4">
      <h2 class="text-2xl font-bold text-white mb-1 drop-shadow-lg">Create Account</h2>
      <p class="text-white/80 text-sm">Join the Event Management System</p>
    </div>

    <!-- Stepper Progress -->
    <div class="mb-6">
      <div class="flex items-center justify-between relative">
        <!-- Step 1 -->
        <div class="flex flex-col items-center flex-1 relative z-10">
          <div 
            class="w-10 h-10 rounded-full bg-white/20 border-2 border-white/30 flex items-center justify-center font-bold text-white/60 transition-all duration-300 mb-2"
            [class.bg-white/90]="currentStep >= 1"
            [class.text-purple-600]="currentStep >= 1"
            [class.border-white/90]="currentStep >= 1"
            [class.scale-110]="currentStep === 1"
            [class.bg-green-500]="currentStep > 1"
            [class.text-white]="currentStep > 1"
            [class.border-green-500]="currentStep > 1"
          >
            1
          </div>
          <div 
            class="text-xs text-white/60 text-center transition-colors duration-300"
            [class.text-white]="currentStep >= 1"
            [class.font-semibold]="currentStep === 1"
            [class.text-green-500]="currentStep > 1"
          >
            Personal Info
          </div>
        </div>

        <!-- Step line 1 -->
        <div 
          class="flex-1 h-0.5 bg-white/20 mx-2 mb-6 transition-colors duration-300"
          [class.bg-green-500]="currentStep > 1"
        ></div>

        <!-- Step 2 -->
        <div class="flex flex-col items-center flex-1 relative z-10">
          <div 
            class="w-10 h-10 rounded-full bg-white/20 border-2 border-white/30 flex items-center justify-center font-bold text-white/60 transition-all duration-300 mb-2"
            [class.bg-white/90]="currentStep >= 2"
            [class.text-purple-600]="currentStep >= 2"
            [class.border-white/90]="currentStep >= 2"
            [class.scale-110]="currentStep === 2"
            [class.bg-green-500]="currentStep > 2"
            [class.text-white]="currentStep > 2"
            [class.border-green-500]="currentStep > 2"
          >
            2
          </div>
          <div 
            class="text-xs text-white/60 text-center transition-colors duration-300"
            [class.text-white]="currentStep >= 2"
            [class.font-semibold]="currentStep === 2"
            [class.text-green-500]="currentStep > 2"
          >
            Security
          </div>
        </div>

        <!-- Step line 2 -->
        <div 
          class="flex-1 h-0.5 bg-white/20 mx-2 mb-6 transition-colors duration-300"
          [class.bg-green-500]="currentStep > 2"
        ></div>

        <!-- Step 3 -->
        <div class="flex flex-col items-center flex-1 relative z-10">
          <div 
            class="w-10 h-10 rounded-full bg-white/20 border-2 border-white/30 flex items-center justify-center font-bold text-white/60 transition-all duration-300 mb-2"
            [class.bg-white/90]="currentStep >= 3"
            [class.text-purple-600]="currentStep >= 3"
            [class.border-white/90]="currentStep >= 3"
            [class.scale-110]="currentStep === 3"
          >
            3
          </div>
          <div 
            class="text-xs text-white/60 text-center transition-colors duration-300"
            [class.text-white]="currentStep >= 3"
            [class.font-semibold]="currentStep === 3"
          >
            Details
          </div>
        </div>
      </div>
    </div>

    <!-- Step header -->
    <div class="text-center mb-4">
      <h3 class="text-lg font-semibold text-white">{{ getStepTitle() }}</h3>
    </div>
    
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-3">
      <!-- Step 1: Personal Information -->
      <div *ngIf="currentStep === 1" class="min-h-[180px]">
        <div class="mb-4">
          <label for="fullName" class="block text-white font-medium text-sm mb-2 drop-shadow-sm">Full Name</label>
          <input
            type="text"
            id="fullName"
            formControlName="fullName"
            [ngClass]="{ 'border-red-400 bg-red-400/10': (submitted || f['fullName'].touched) && f['fullName'].errors }"
            class="w-full bg-white/10 border border-white/30 rounded-lg px-4 py-2.5 text-white placeholder-white/60 transition-all duration-300 outline-none focus:bg-white/15 focus:border-white/50 focus:shadow-[0_0_0_3px_rgba(255,255,255,0.1)]"
            placeholder="Enter your full name"
            (input)="onTextInput($event)"
            (paste)="onPaste($event, 'text')"
          />
          <div *ngIf="(submitted || f['fullName'].touched) && f['fullName'].errors" class="text-red-400 text-sm mt-1 drop-shadow-sm">
            <div *ngFor="let error of getFieldError('fullName')">
              {{ error }}
            </div>
          </div>
        </div>

        <div class="mb-6">
          <label for="email" class="block text-white font-medium text-sm mb-2 drop-shadow-sm">Email Address</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            [ngClass]="{ 'border-red-400 bg-red-400/10': (submitted || f['email'].touched) && f['email'].errors }"
            class="w-full bg-white/10 border border-white/30 rounded-lg px-4 py-2.5 text-white placeholder-white/60 transition-all duration-300 outline-none focus:bg-white/15 focus:border-white/50 focus:shadow-[0_0_0_3px_rgba(255,255,255,0.1)]"
            placeholder="Enter your email"
            (input)="onEmailInput($event)"
            (paste)="onPaste($event, 'email')"
          />
          <div *ngIf="(submitted || f['email'].touched) && f['email'].errors" class="text-red-400 text-sm mt-1 drop-shadow-sm">
            <div *ngFor="let error of getFieldError('email')">
              {{ error }}
            </div>
          </div>
        </div>
      </div>

      <!-- Step 2: Account Security -->
      <div *ngIf="currentStep === 2" class="min-h-[180px]">
        <div class="grid grid-cols-2 gap-4 mb-4">
          <div>
            <label for="password" class="block text-white font-medium text-sm mb-2 drop-shadow-sm">Password</label>
            <input
              type="password"
              id="password"
              formControlName="password"
              [ngClass]="{ 'border-red-400 bg-red-400/10': (submitted || f['password'].touched) && f['password'].errors }"
              class="w-full bg-white/10 border border-white/30 rounded-lg px-4 py-2.5 text-white placeholder-white/60 transition-all duration-300 outline-none focus:bg-white/15 focus:border-white/50 focus:shadow-[0_0_0_3px_rgba(255,255,255,0.1)]"
              placeholder="Enter your password"
            />
            <div *ngIf="(submitted || f['password'].touched) && f['password'].errors" class="text-red-400 text-sm mt-1 drop-shadow-sm">
              <div *ngFor="let error of getFieldError('password')">
                {{ error }}
              </div>
            </div>
            
            <!-- Password Strength Indicator -->
            <div *ngIf="f['password'].value" class="mt-2">
              <div class="w-full h-2 bg-white/20 rounded-full overflow-hidden">
                <div 
                  class="h-full transition-all duration-300"
                  [style.width.%]="(getPasswordStrength() / 5) * 100"
                  [style.background]="getPasswordStrengthColor()"
                ></div>
              </div>
              <div 
                class="text-xs mt-1 font-medium"
                [style.color]="getPasswordStrengthColor()"
              >
                Password Strength: {{ getPasswordStrength() <= 2 ? 'Weak' : getPasswordStrength() <= 3 ? 'Medium' : 'Strong' }}
              </div>
            </div>
          </div>

          <div>
            <label for="confirmPassword" class="block text-white font-medium text-sm mb-2 drop-shadow-sm">Confirm Password</label>
            <input
              type="password"
              id="confirmPassword"
              formControlName="confirmPassword"
              [ngClass]="{ 'border-red-400 bg-red-400/10': (submitted || f['confirmPassword'].touched) && f['confirmPassword'].errors }"
              class="w-full bg-white/10 border border-white/30 rounded-lg px-4 py-2.5 text-white placeholder-white/60 transition-all duration-300 outline-none focus:bg-white/15 focus:border-white/50 focus:shadow-[0_0_0_3px_rgba(255,255,255,0.1)]"
              placeholder="Confirm your password"
            />
            <div *ngIf="(submitted || f['confirmPassword'].touched) && f['confirmPassword'].errors" class="text-red-400 text-sm mt-1 drop-shadow-sm">
              <div *ngFor="let error of getFieldError('confirmPassword')">
                {{ error }}
              </div>
            </div>
          </div>
        </div>

        <div class="mb-6">
          <label for="grade" class="block text-white font-medium text-sm mb-2 drop-shadow-sm">Grade</label>
          <input
            type="number"
            id="grade"
            formControlName="grade"
            [ngClass]="{ 'border-red-400 bg-red-400/10': (submitted || f['grade'].touched) && f['grade'].errors }"
            class="w-full bg-white/10 border border-white/30 rounded-lg px-4 py-2.5 text-white placeholder-white/60 transition-all duration-300 outline-none focus:bg-white/15 focus:border-white/50 focus:shadow-[0_0_0_3px_rgba(255,255,255,0.1)]"
            placeholder="Enter your grade (1-12)"
            min="1"
            max="12"
            (input)="onNumberInput($event)"
            (paste)="onPaste($event, 'number')"
          />
          <div *ngIf="(submitted || f['grade'].touched) && f['grade'].errors" class="text-red-400 text-sm mt-1 drop-shadow-sm">
            <div *ngFor="let error of getFieldError('grade')">
              {{ error }}
            </div>
          </div>
        </div>

        <div class="mb-6">
          <label for="phoneNumber" class="block text-white font-medium text-sm mb-2 drop-shadow-sm">Phone Number</label>
          <input
            type="tel"
            id="phoneNumber"
            formControlName="phoneNumber"
            [ngClass]="{ 'border-red-400 bg-red-400/10': (submitted || f['phoneNumber'].touched) && f['phoneNumber'].errors }"
            class="w-full bg-white/10 border border-white/30 rounded-lg px-4 py-2.5 text-white placeholder-white/60 transition-all duration-300 outline-none focus:bg-white/15 focus:border-white/50 focus:shadow-[0_0_0_3px_rgba(255,255,255,0.1)]"
            placeholder="Enter your 11-digit phone number"
            (input)="onPhoneNumberInput($event)"
            (paste)="onPaste($event, 'phone')"
          />
          <div *ngIf="(submitted || f['phoneNumber'].touched) && f['phoneNumber'].errors" class="text-red-400 text-sm mt-1 drop-shadow-sm">
            <div *ngFor="let error of getFieldError('phoneNumber')">
              {{ error }}
            </div>
          </div>
        </div>
      </div>

      <!-- Step 3: Additional Details -->
      <div *ngIf="currentStep === 3" class="min-h-[180px]">
        <div class="mb-4">
          <label for="nationalNumber" class="block text-white font-medium text-sm mb-2 drop-shadow-sm">National Number</label>
          <input
            type="text"
            id="nationalNumber"
            formControlName="nationalNumber"
            [ngClass]="{ 'border-red-400 bg-red-400/10': (submitted || f['nationalNumber'].touched) && f['nationalNumber'].errors }"
            class="w-full bg-white/10 border border-white/30 rounded-lg px-4 py-2.5 text-white placeholder-white/60 transition-all duration-300 outline-none focus:bg-white/15 focus:border-white/50 focus:shadow-[0_0_0_3px_rgba(255,255,255,0.1)]"
            placeholder="Enter your 16-digit national number"
            (input)="onNumberInput($event)"
            (paste)="onPaste($event, 'number')"
          />
          <div *ngIf="(submitted || f['nationalNumber'].touched) && f['nationalNumber'].errors" class="text-red-400 text-sm mt-1 drop-shadow-sm">
            <div *ngFor="let error of getFieldError('nationalNumber')">
              {{ error }}
            </div>
          </div>
        </div>

        <div class="mb-6">
          <label for="dateOfBirth" class="block text-white font-medium text-sm mb-2 drop-shadow-sm">Date of Birth</label>
          <input
            type="date"
            id="dateOfBirth"
            formControlName="dateOfBirth"
            [ngClass]="{ 'border-red-400 bg-red-400/10': (submitted || f['dateOfBirth'].touched) && f['dateOfBirth'].errors }"
            class="w-full bg-white/10 border border-white/30 rounded-lg px-4 py-3.5 text-white transition-all duration-300 outline-none focus:bg-white/15 focus:border-white/50 focus:shadow-[0_0_0_3px_rgba(255,255,255,0.1)]"
          />
          <div *ngIf="(submitted || f['dateOfBirth'].touched) && f['dateOfBirth'].errors" class="text-red-400 text-sm mt-1 drop-shadow-sm">
            <div *ngFor="let error of getFieldError('dateOfBirth')">
              {{ error }}
            </div>
          </div>
        </div>

        <div class="mb-6">
          <label for="collageId" class="block text-white font-medium text-sm mb-2 drop-shadow-sm">College ID</label>
          <input
            type="text"
            id="collageId"
            formControlName="collageId"
            [ngClass]="{ 'border-red-400 bg-red-400/10': (submitted || f['collageId'].touched) && f['collageId'].errors }"
            class="w-full bg-white/10 border border-white/30 rounded-lg px-4 py-2.5 text-white placeholder-white/60 transition-all duration-300 outline-none focus:bg-white/15 focus:border-white/50 focus:shadow-[0_0_0_3px_rgba(255,255,255,0.1)]"
            placeholder="Enter your college ID"
            (input)="onCollegeIdInput($event)"
            (paste)="onPaste($event, 'collegeId')"
          />
          <div *ngIf="(submitted || f['collageId'].touched) && f['collageId'].errors" class="text-red-400 text-sm mt-1 drop-shadow-sm">
            <div *ngFor="let error of getFieldError('collageId')">
              {{ error }}
            </div>
          </div>
        </div>
      </div>

      <!-- Stepper Navigation -->
      <div class="flex justify-between gap-4 mt-4">
        <button 
          type="button" 
          *ngIf="currentStep > 1"
          (click)="previousStep()" 
          [disabled]="loading"
          class="flex-1 bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white font-semibold transition-all duration-300 uppercase tracking-wide hover:bg-white/20 hover:-translate-y-0.5 disabled:opacity-60 disabled:cursor-not-allowed"
        >
          Previous
        </button>

        <button 
          type="button" 
          *ngIf="currentStep < totalSteps"
          (click)="nextStep()" 
          [disabled]="loading || !isCurrentStepValid()"
          class="flex-1 bg-white/20 border border-white/30 rounded-lg px-4 py-2 text-white font-semibold transition-all duration-300 uppercase tracking-wide hover:bg-white/30 hover:-translate-y-0.5 disabled:opacity-60 disabled:cursor-not-allowed"
        >
          Next
        </button>

        <button 
          type="submit" 
          *ngIf="currentStep === totalSteps"
          [disabled]="loading || registerForm.invalid"
          class="flex-1 bg-white/20 border border-white/30 rounded-lg px-4 py-2 text-white font-semibold transition-all duration-300 uppercase tracking-wide hover:bg-white/30 hover:-translate-y-0.5 hover:shadow-lg disabled:opacity-60 disabled:cursor-not-allowed"
        >
          <span *ngIf="loading" class="inline-block w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"></span>
          {{ loading ? 'Creating Account...' : 'Create Account' }}
        </button>
      </div>

      <div *ngIf="success" class="bg-green-500/20 border border-green-500/30 rounded-lg p-4 text-white text-sm text-center backdrop-blur-sm">
        {{ success }}
      </div>

      <div *ngIf="error" class="bg-red-500/20 border border-red-500/30 rounded-lg p-4 text-white text-sm text-center backdrop-blur-sm">
        {{ error }}
      </div>
    </form>

    <div class="flex flex-col gap-2 mt-4 text-center">
      <a routerLink="/auth/login" class="text-white/90 no-underline text-sm transition-all duration-300 py-2 px-4 rounded-lg bg-white/5 hover:text-white hover:bg-white/10 hover:-translate-y-0.5">
        Already have an account? Sign In
      </a>
    </div>
  </div>
</div>
