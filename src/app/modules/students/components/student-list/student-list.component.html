<app-header></app-header>

<div class="max-w-[1400px] mx-auto p-8">
  <div class="text-left mb-8 p-0">
    <h1 class="text-3xl font-bold bg-gradient-to-r from-indigo-500 to-purple-600 bg-clip-text text-transparent mb-2 tracking-tight">Student Profiles</h1>
    <p class="text-gray-600 text-sm m-0 leading-relaxed">Browse and connect with fellow students</p>
  </div>

  <div class="max-w-[500px] mb-12 relative">
    <div class="absolute left-4 top-1/2 -translate-y-1/2 text-xl text-violet-500">ğŸ”</div>
    <input 
      type="text" 
      [(ngModel)]="searchTerm" 
      (input)="onSearchChange()"
      placeholder="Search students by name, email, or grade..."
      class="w-full p-4 pl-14 pr-6 border-2 border-gray-100 rounded-xl text-base transition-all duration-300 bg-gray-50 placeholder:text-gray-400 focus:outline-none focus:border-violet-500 focus:bg-white focus:shadow-[0_0_0_16px_rgba(139,92,246,0.15)] focus:-translate-y-0.5"
    >
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="text-center py-20 flex flex-col items-center gap-4">
    <div class="w-16 h-16 border-4 border-gray-100 border-t-violet-500 rounded-full animate-spin"></div>
    <p class="text-gray-600 text-lg">Loading students...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="text-center py-16 bg-gradient-to-br from-red-50 to-red-100 rounded-2xl border-2 border-red-300 my-8">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-red-500 mb-4">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="12" y1="8" x2="12" y2="12"></line>
      <line x1="12" y1="16" x2="12.01" y2="16"></line>
    </svg>
    <p class="text-red-700 text-lg font-medium">{{ error }}</p>
  </div>

  <!-- Students Grid -->
  <div *ngIf="!loading && !error" class="grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-6 animate-fade-in lg:grid-cols-5 xl:grid-cols-5 md:grid-cols-4">
    <div 
      *ngFor="let student of students; let i = index" 
      class="bg-white rounded-2xl overflow-hidden shadow-[0_6px_20px_rgba(0,0,0,0.08)] transition-all duration-400 cursor-pointer border-2 border-transparent hover:-translate-y-2 hover:scale-[1.02] hover:shadow-[0_25px_40px_rgba(0,0,0,0.12)] hover:border-violet-500 opacity-0 animate-card-slide-up"
      [style]="'animation-delay: ' + (i * 0.1) + 's'"
    >
      <div class="relative h-[140px] overflow-hidden bg-gradient-to-br from-gray-50 to-gray-200 flex items-center justify-center">
        <img [src]="student.profileImage || 'assets/images/default-avatar.svg'" [alt]="student.fullName" 
             class="w-full h-full object-cover transition-transform duration-600 hover:scale-110"
             [class]="student.profileImage ? '' : 'w-16 h-16 opacity-60'">
      </div>
      
      <div class="p-5 flex flex-col gap-3">
        <h3 class="text-lg font-bold text-gray-900 m-0 leading-tight">{{ student.fullName }}</h3>
        <p class="text-gray-600 text-xs m-0 break-words">{{ student.email }}</p>
        
        <button class="p-2.5 px-5 bg-gradient-to-r from-violet-500 to-violet-600 text-white border-none rounded-lg text-xs font-semibold cursor-pointer transition-all duration-300 shadow-[0_4px_15px_rgba(139,92,246,0.3)] w-full mt-1 hover:bg-gradient-to-r hover:from-violet-600 hover:to-violet-700 hover:-translate-y-0.5 hover:shadow-[0_8px_25px_rgba(139,92,246,0.4)] active:translate-y-0" (click)="viewStudentProfile(student)">
          View Profile
        </button>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && !error && students.length === 0" class="text-center py-20 bg-gradient-to-br from-gray-50 to-gray-100 rounded-3xl border-2 border-dashed border-gray-300 my-8">
    <div class="text-slate-400 mb-6">
      <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
        <circle cx="9" cy="7" r="4"></circle>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
      </svg>
    </div>
    <h3 class="text-3xl font-bold text-slate-800 mb-3">No students found</h3>
    <p class="text-slate-600 text-lg">Try adjusting your search criteria</p>
  </div>
</div>
