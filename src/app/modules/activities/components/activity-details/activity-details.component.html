<app-header></app-header>

<div class="min-h-screen bg-white p-8">
  <!-- Activity Header -->
  <div *ngIf="!loading && !error && activity" class="bg-gradient-to-br from-violet-500 to-violet-600 rounded-2xl p-8 flex items-center gap-6 mb-8 shadow-[0_10px_25px_-5px_rgba(139,92,246,0.25)] border border-violet-500/20">
    <div class="flex-1 text-white">
      <h1 class="text-3xl font-bold mb-2 leading-tight">{{ activity.name }}</h1>
      <p class="text-lg mb-4 opacity-90 leading-relaxed">{{ activity.description || 'Fostering innovation and excellence' }}</p>
      <div class="flex items-center gap-6 flex-wrap">
        <span class="text-sm font-medium opacity-90">342 Members</span>
        <span class="text-sm font-medium opacity-90">18 Events</span>
        <span class="bg-white/20 text-white px-3 py-1 rounded-full text-xs font-semibold backdrop-blur-[10px] border border-white/20 uppercase tracking-wide">{{ activity.category || 'General' }}</span>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="text-center py-16">
    <div class="w-16 h-16 border-4 border-gray-200 border-t-violet-500 rounded-full animate-spin mx-auto mb-4"></div>
    <p class="text-gray-600">Loading activity details...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="bg-red-50 rounded-2xl border-2 border-red-300 text-center py-16">
    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-red-500 mx-auto mb-4">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="12" y1="8" x2="12" y2="12"></line>
      <line x1="12" y1="16" x2="12.01" y2="16"></line>
    </svg>
    <h3 class="text-xl font-semibold text-red-700 mb-2">Unable to Load Activity</h3>
    <p class="text-red-600">{{ error }}</p>
  </div>

  <!-- Activity Details -->
  <div *ngIf="activity$ | async as activity; else loadingOrError" class="animate-fade-in">
    <!-- Main Content -->
    <div class="grid grid-cols-1 lg:grid-cols-[1fr_380px] gap-8">
      <!-- Left Content Container -->
      <div class="flex flex-col gap-6">
        <!-- Description Card -->
        <div class="bg-white rounded-2xl p-8 shadow-[0_4px_20px_rgba(0,0,0,0.08)] border border-gray-100">
          <h2 class="text-xl font-semibold text-gray-900 mb-4">About this Activity</h2>
          
          <!-- Vision Section -->
          <div class="mb-6">
            <h3 class="text-lg font-medium text-gray-900 mb-2">Vision</h3>
            <p class="text-gray-600 leading-relaxed">{{ activity?.vision || 'No vision statement available.' }}</p>
          </div>
          
          <!-- Mission Section -->
          <div class="mb-6">
            <h3 class="text-lg font-medium text-gray-900 mb-2">Mission</h3>
            <p class="text-gray-600 leading-relaxed">{{ activity?.mission || 'No mission statement available.' }}</p>
          </div>
          
          <!-- Objectives Section -->
          <div>
            <h3 class="text-lg font-medium text-gray-900 mb-2">Objectives</h3>
            <p class="text-gray-600 leading-relaxed">{{ activity.description || 'No objectives available.' }}</p>
          </div>
        </div>
        <app-activity-committees [activityId]="activity.id"></app-activity-committees>
      </div>

      <!-- Right Sidebar -->
      <div class="flex flex-col gap-6">
        <!-- Activity Structure -->
        <app-activity-structure [activityId]="activity.id"></app-activity-structure>

        <!-- Actions Card -->
        <div class="bg-white rounded-2xl p-6 shadow-[0_4px_20px_rgba(0,0,0,0.08)] border border-gray-100">
          <div class="flex flex-col gap-3">
            <button class="flex items-center justify-center gap-3 p-4 bg-violet-500 text-white font-semibold rounded-xl cursor-pointer transition-all duration-300 shadow-[0_4px_15px_rgba(139,92,246,0.3)] hover:-translate-y-0.5 hover:shadow-[0_8px_25px_rgba(139,92,246,0.4)]">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="m22 21-3-3"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
              </svg>
              Join Activity
            </button>
            <button class="flex items-center justify-center gap-3 p-4 bg-white text-gray-600 font-semibold rounded-xl cursor-pointer transition-all duration-300 border-2 border-gray-100 hover:border-red-500 hover:text-red-500 hover:-translate-y-0.5">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 6h18"></path>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              </svg>
              Leave Activity
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Template references -->
<ng-template #loadingOrError>
  <div *ngIf="loading" class="text-center py-16">
    <div class="w-16 h-16 border-4 border-gray-200 border-t-violet-500 rounded-full animate-spin mx-auto mb-4"></div>
    <p class="text-gray-600">Loading activity details...</p>
  </div>
  <div *ngIf="error" class="bg-red-50 rounded-2xl border-2 border-red-300 text-center py-16">
    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-red-500 mx-auto mb-4">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="12" y1="8" x2="12" y2="12"></line>
      <line x1="12" y1="16" x2="12.01" y2="16"></line>
    </svg>
    <h3 class="text-xl font-semibold text-red-700 mb-2">Unable to Load Activity</h3>
    <p class="text-red-600">{{ error }}</p>
  </div>
</ng-template>
