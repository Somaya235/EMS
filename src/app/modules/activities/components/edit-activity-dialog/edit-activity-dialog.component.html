<!-- Backdrop -->
<div *ngIf="isVisible" class="fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] backdrop-blur-sm animate-fade-in" (click)="onBackdropClick($event)">
  <!-- Dialog -->
  <div class="bg-white rounded-2xl shadow-[0_20px_60px_rgba(0,0,0,0.3)] w-[90%] max-w-[500px] max-h-[90vh] overflow-hidden animate-slide-in">
    <!-- Header -->
    <div class="flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-br from-gray-50 to-gray-100">
      <h2 class="text-xl font-semibold text-gray-900 m-0">Edit Activity</h2>
      <button class="bg-transparent border-none p-2 rounded-lg cursor-pointer text-gray-600 transition-all duration-200 hover:bg-black/5 hover:text-gray-700" (click)="onClose()" title="Close">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <!-- Content -->
    <div class="p-6 max-h-[60vh] overflow-y-auto">
      <form class="flex flex-col gap-6">
        <!-- Name Field -->
        <div class="flex flex-col">
          <label for="activity-name" class="block text-sm font-semibold text-gray-700 mb-2">Activity Name</label>
          <input
            id="activity-name"
            name="activityName"
            type="text"
            class="w-full p-3 px-4 border-2 border-gray-200 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:border-violet-500 focus:shadow-[0_0_0_3px_rgba(139,92,246,0.1)] bg-white placeholder:text-gray-400"
            [(ngModel)]="formData.name"
            placeholder="Enter activity name"
            required
          />
        </div>

        <!-- Description Field -->
        <div class="flex flex-col">
          <label for="activity-description" class="block text-sm font-semibold text-gray-700 mb-2">Description</label>
          <textarea
            id="activity-description"
            name="activityDescription"
            class="w-full p-3 px-4 border-2 border-gray-200 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:border-violet-500 focus:shadow-[0_0_0_3px_rgba(139,92,246,0.1)] bg-white placeholder:text-gray-400 resize-y min-h-[100px]"
            [(ngModel)]="formData.description"
            placeholder="Enter activity description"
            rows="4"
            required
          ></textarea>
        </div>

        <!-- Category Field -->
        <div class="flex flex-col">
          <label for="activity-category" class="block text-sm font-semibold text-gray-700 mb-2">Category</label>
          <select
            id="activity-category"
            name="activityCategory"
            class="w-full p-3 px-4 border-2 border-gray-200 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:border-violet-500 focus:shadow-[0_0_0_3px_rgba(139,92,246,0.1)] bg-white cursor-pointer appearance-none pr-10"
            [(ngModel)]="formData.category"
            required
          >
            <option value="">Select a category</option>
            <option *ngFor="let category of categories" [value]="category">
              {{ category }}
            </option>
          </select>
        </div>

        <!-- Vision Field -->
        <div class="flex flex-col">
          <label for="activity-vision" class="block text-sm font-semibold text-gray-700 mb-2">Vision</label>
          <textarea
            id="activity-vision"
            name="activityVision"
            class="w-full p-3 px-4 border-2 border-gray-200 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:border-violet-500 focus:shadow-[0_0_0_3px_rgba(139,92,246,0.1)] bg-white placeholder:text-gray-400 resize-y min-h-[100px]"
            [(ngModel)]="formData.vision"
            placeholder="Enter activity vision statement"
            rows="3"
          ></textarea>
        </div>

        <!-- Mission Field -->
        <div class="flex flex-col">
          <label for="activity-mission" class="block text-sm font-semibold text-gray-700 mb-2">Mission</label>
          <textarea
            id="activity-mission"
            name="activityMission"
            class="w-full p-3 px-4 border-2 border-gray-200 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:border-violet-500 focus:shadow-[0_0_0_3px_rgba(139,92,246,0.1)] bg-white placeholder:text-gray-400 resize-y min-h-[100px]"
            [(ngModel)]="formData.mission"
            placeholder="Enter activity mission statement"
            rows="3"
          ></textarea>
        </div>
      </form>
    </div>

    <!-- Footer -->
    <div class="flex items-center justify-end gap-4 p-6 border-t border-gray-200 bg-gray-50">
      <button class="p-3 px-6 rounded-lg text-sm font-semibold cursor-pointer transition-all duration-200 border-none bg-gray-100 text-gray-700 hover:bg-gray-200" (click)="onClose()">
        Cancel
      </button>
      <button 
        class="p-3 px-6 rounded-lg text-sm font-semibold cursor-pointer transition-all duration-200 border-none bg-gradient-to-r from-violet-500 to-violet-600 text-white shadow-[0_4px_12px_rgba(139,92,246,0.3)] hover:not(:disabled):bg-gradient-to-r hover:not(:disabled):from-violet-600 hover:not(:disabled):to-violet-700 hover:not(:disabled):shadow-[0_6px_20px_rgba(139,92,246,0.4)] hover:not(:disabled):-translate-y-px disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed disabled:shadow-none disabled:translate-y-0" 
        (click)="onSave()"
        [disabled]="!formData.name.trim() || !formData.description.trim()"
      >
        Save Changes
      </button>
    </div>
  </div>
</div>
